/*
 * jQuery SuperLightBox Plugin v1.0
 * Copyright (C) 2017 Taraprasad Swain
 * Author URL: http://www.taraprasad.com
 * Email: swain.tara@gmail.com
 */
jQuery.fn.superLightBox=function(e){var t,o,r,i,a={gallery:!0,swipe:!0,keyboard:!0,closeOutClick:!0,videopreviewurl:"images/video-preview.jpg",galleryThumbnailWidth:100,galleryThumbanilGap:1,maxZoom:3,mediaAttribute:"href",mediaCaption:"data-superlightcaption"},n=[],s=[],l=[],p=[],d=0,c=0,u=0,g=jQuery.extend({},a,e)
g.keyboard&&jQuery(document).keyup(function(e){jQuery(".superlightboxcontainer").length&&jQuery(".superlightboxcontainer").hasClass(i)&&(e.preventDefault(),27==e.keyCode?f():37==e.keyCode||38==e.keyCode?y(t-1):(39==e.keyCode||40==e.keyCode)&&y(t+1))}),jQuery(window).resize(function(){jQuery(".superlightboxcontainer").length&&jQuery(".superlightboxcontainer").hasClass(i)&&(S(),v())})
var m=function(e){var o=e.attr("href")
if(n.indexOf(o)>-1){t=n.indexOf(o),jQuery(".superlightboxcontainer").length&&jQuery(".superlightboxcontainer").remove(),jQuery("body").append(O())
var r='<div class="superlightbox_slide"></div>'
jQuery(".superlightbox_slider").append(r),jQuery(".superlightbox_slider").append(r),jQuery(".superlightbox_slider").append(r),g.gallery&&n.length>1&&_(),jQuery(".superlightboxcontainer").fadeIn(),x(),y(t)}},_=function(){var e=""
for(var t in n)e+=b(n[t],t)
jQuery(".superlightbox_gallery_wrapper").append(e)
var o=0
jQuery(".superlightbox_gallery_wrapper > div").each(function(e){var t=e*g.galleryThumbnailWidth+e*g.galleryThumbanilGap
o=t,jQuery(this).css({left:t})}),o+=g.galleryThumbnailWidth,jQuery(".superlightbox_gallery_wrapper").width(o)},h=function(e){if(jQuery(".superlightboxcontainer").length){var t=jQuery(window).width()
if(jQuery(".superlightbox_gallery_wrapper").width()>t){var o=parseInt(jQuery(".superlightbox_gallery_wrapper").position().left),r=o-e*t,i=-jQuery(".superlightbox_gallery_wrapper").width()+t
i>r?r=i:r>0&&(r=0),jQuery(".superlightbox_gallery_wrapper").animate({left:r},g.easingTime,function(){})}}},v=function(){if(jQuery(".superlightboxcontainer").length&&g.gallery){if(jQuery(window).width()>jQuery(".superlightbox_gallery_wrapper").width()){var e=(jQuery(window).width()-jQuery(".superlightbox_gallery_wrapper").width())/2
jQuery(".superlightbox_gallery_wrapper").css({left:e})}else jQuery(".superlightbox_gallery_wrapper").css({left:0})
jQuery(".superlightbox_gallery_wrapper").is(":visible")?jQuery(".superlightbox_gallery_nav").show():jQuery(".superlightbox_gallery_nav").hide()}},b=function(e,t){var o=R(e),r="",i=""
"image"==o?r=e:"youtube"==o?(r=N(e),i=" superlightbox_video"+U(e)):"vimeo"==o&&(r=g.videopreviewurl,I(e),i=" superlightbox_video"+D(e))
var a='<div class="superlightbox_thumb'+t+i+'" style="background-image: url(\''+r+"')\"></div>"
return a},f=function(){if(jQuery(".superlightboxcontainer").length){var e=jQuery(".superlightbox_slide"+t)
e.length&&e.addClass("superlightbox_remove"),jQuery(".superlightboxcontainer").fadeOut("slow",function(){jQuery(this).remove()})}},x=function(){jQuery(".superlightboxcontainer").length&&(jQuery(".superlightbox_close").click(function(){f()}),g.closeOutClick&&jQuery(".superlightbox_slider").click(function(e){"IMG"!=e.target.nodeName&&f()}),jQuery(".superlightbox_prev").click(function(){y(t-1)}),jQuery(".superlightbox_next").click(function(){y(t+1)}),g.gallery&&(jQuery(".superlightbox_gallery_button").click(function(){jQuery(this).hasClass("superlightbox_gallery_open")?(jQuery(this).removeClass("superlightbox_gallery_open"),jQuery(this).addClass("superlightbox_gallery_close"),jQuery(".superlightbox_gallery_wrapper").slideDown(),jQuery(".superlightbox_slider").addClass("superlightbox_gallery_visible"),v()):(jQuery(this).removeClass("superlightbox_gallery_close"),jQuery(this).addClass("superlightbox_gallery_open"),jQuery(".superlightbox_gallery_wrapper").slideUp(),jQuery(".superlightbox_gallery_nav").hide(),jQuery(".superlightbox_slider").removeClass("superlightbox_gallery_visible"))}),jQuery(".superlightbox_gallery_prev").click(function(){h(-1)}),jQuery(".superlightbox_gallery_next").click(function(){h(1)}),jQuery(".superlightbox_gallery_wrapper > div").click(function(){y(jQuery(this).index())}),g.swipe&&H(".superlightbox_gallery_wrapper",{swipeStart:function(e){d=jQuery(".superlightbox_gallery_wrapper").position().left},swipe:function(e){jQuery(window).width()
jQuery(".superlightbox_gallery_wrapper").css({left:e.eX-e.sX+d})},swipeEnd:function(e,t){var o=(Math.abs(e.sX)-Math.abs(e.eX),jQuery(window).width()),r=jQuery(".superlightbox_gallery_wrapper").width()
if(o>r){var i=(o-r)/2
jQuery(".superlightbox_gallery_wrapper").animate({left:i},g.easingTime)}else jQuery(".superlightbox_gallery_wrapper").position().left>0?jQuery(".superlightbox_gallery_wrapper").animate({left:0},g.easingTime):jQuery(".superlightbox_gallery_wrapper").position().left<-r+o&&jQuery(".superlightbox_gallery_wrapper").animate({left:-r+o},g.easingTime)}})),g.swipe&&H(".superlightbox_wrapper",{pinchImage:".superlightbox_slider > div:eq(1) img",maxZoom:g.maxZoom,pinchZoom:function(e){jQuery(".superlightbox_slider > div:eq(1) img").css(e)},pinchZoomStart:function(e){jQuery(".superlightbox_slider").addClass("superlightbox_sliding")},pinchZoomEnd:function(e){jQuery(".superlightbox_slider").removeClass("superlightbox_sliding"),Q()},swipeStart:function(e){jQuery(".superlightbox_slider").addClass("superlightbox_sliding")},swipe:function(e){var t=jQuery(window).width()
jQuery(".superlightbox_slider").css({left:-t+e.eX-e.sX})},swipeEnd:function(e,o){var r=Math.abs(e.sX)-Math.abs(e.eX),i=jQuery(window).width(),a=.2*i
if(Math.abs(r)>a)y(r>0?t+1:t-1)
else{var i=jQuery(window).width()
jQuery(".superlightbox_slider").animate({left:-i},g.easingTime,function(){jQuery(".superlightbox_slider").removeClass("superlightbox_sliding")})}}}))},y=function(e){var i="right"
t>e&&(i="left"),0>e||e==n.length-1?(e=n.length-1,o=e-1,r=0):e>=n.length||0==e?(e=0,o=n.length-1,r=1):(o=e-1,r=e+1)
var a,s=P(e),l=1
return e==t?void(0==jQuery(".superlightbox_slider > div.superlightbox_slide"+e).length&&(jQuery(".superlightbox_slider > div:first").replaceWith(P(o)),jQuery(".superlightbox_slider > div:eq(1)").replaceWith(s),jQuery(".superlightbox_slider > div:last").replaceWith(P(r)),E(o),E(e),E(r),Q())):("left"==i?(a=jQuery(".superlightbox_slider > div:first"),l=-1):a=jQuery(".superlightbox_slider > div:last"),a.hasClass("superlightbox_slide"+e)||(a.replaceWith(s),E(e),Q()),w(l),void(t=e))},w=function(e){if(jQuery(".superlightboxcontainer").length&&3==jQuery(".superlightbox_slider > div").length){var t=jQuery(window).width(),o=0
e>0&&(o=-2*t),jQuery(".superlightbox_slider").addClass("superlightbox_sliding"),jQuery(".superlightbox_slider").animate({left:o},g.easingTime,k)}},k=function(){var e=".superlightbox_slider > .superlightbox_slide"+t,i=".superlightbox_slider > .superlightbox_slide"+r,a=".superlightbox_slider > .superlightbox_slide"+o
jQuery(".superlightbox_slider > div").not(e+","+i+","+a).remove(),jQuery(e).length>1&&(0==jQuery(".superlightbox_slider").position().left?jQuery(e+":last").remove():jQuery(e+":first").remove()),jQuery(a).length>1&&jQuery(a+":last").remove(),jQuery(i).length>1&&jQuery(i+":first").remove(),jQuery(".superlightbox_slider > div:first").hasClass("superlightbox_slide"+o)||(jQuery(a).remove(),jQuery(".superlightbox_slider").prepend(P(o)),E(o)),jQuery(".superlightbox_slider > div:last").hasClass("superlightbox_slide"+r)||(jQuery(i).remove(),jQuery(".superlightbox_slider").append(P(r)),E(r)),jQuery(".superlightbox_slider").removeClass("superlightbox_sliding"),Q(),j(t)},S=function(){j(o),j(t),j(r),Q()},j=function(e){if(jQuery(".superlightboxcontainer").length){var o=jQuery(window).height(),r=jQuery(window).width()
if(l[e]){e==t&&(u=0,c=0)
var i=jQuery(".superlightbox_slide"+e),a=l[e],n=p[e],s=parseInt(a*r),d=parseInt(n*o)
s>o?(i.find("img").css({height:o,width:d,left:"50%",top:"50%"}),jQuery(".superlightbox_slide"+e).find(".superlightbox_caption").length&&jQuery(".superlightbox_slide"+e).find(".superlightbox_caption").css({"max-width":d})):(i.find("img").css({width:r,height:s,left:"50%",top:"50%"}),jQuery(".superlightbox_slide"+e).find(".superlightbox_caption").length&&jQuery(".superlightbox_slide"+e).find(".superlightbox_caption").css({"max-width":r}))}else jQuery(".superlightbox_slide"+e).find(".superlightbox_embed_wrapper").length&&(jQuery(".superlightbox_slide"+e).find(".superlightbox_embed_wrapper").css({"max-width":parseInt(1.77*o)}),jQuery(".superlightbox_slide"+e).find(".superlightbox_caption").length&&jQuery(".superlightbox_slide"+e).find(".superlightbox_caption").css({"max-width":parseInt(1.77*o)}))}},Q=function(){var e=jQuery(window).width()
jQuery(".superlightbox_slider > div").each(function(t){jQuery(this).css({left:t*e,width:e})}),jQuery(".superlightbox_slider").css({left:-e,width:3*e})},P=function(e){if(!n[e])return""
var t,o=n[e],r=R(o)
return"image"==r?t='<div class="superlightbox_slide superlightbox_slide'+e+' superloading">':"youtube"==r?(t='<div class="superlightbox_slide superlightbox_slide_video superlightbox_slide'+e+'">',t+=A(o)):"vimeo"==r&&(t='<div class="superlightbox_slide superlightbox_slide_video superlightbox_slide'+e+'">',t+=W(o)),""!=s[e]&&(t+='<div class="superlightbox_caption">'+s[e]+"</div>"),t+="</div>"},E=function(e){var t=n[e],o=R(t)
if("image"!=o)return void j(e)
var r=new Image
r.superindex=e,r.onload=T,r.src=t},T=function(){if(void 0!==this.superindex&&jQuery(".superlightbox_slide"+this.superindex).length){var e=jQuery(".superlightbox_slide"+this.superindex),t=""
""!=s[this.superindex]&&(t='<div class="superlightbox_caption">'+s[this.superindex]+"</div>"),e.html('<img src="'+this.src+'" />'+t),l[this.superindex]=this.naturalHeight/this.naturalWidth,p[this.superindex]=this.naturalWidth/this.naturalHeight,j(this.superindex),setTimeout(function(){e.removeClass("superloading")},800)}},R=function(e){var t=e.split(".").reverse()[0].toLowerCase()
return jQuery.inArray(t,["jpg","jpeg","png","gif"])>-1?"image":$(e)?"youtube":C(e)?"vimeo":""},C=function(e){var t=/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i,o=t.exec(e)
return o&&o[1]},$=function(e){var t=/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i,o=t.exec(e)
return o&&o[1]},A=function(e){var t=U(e)
return'<div class="superlightbox_embed_wrapper"><div class="superlightbox_embed"><iframe width="560" height="315" src="//www.youtube.com/embed/'+t+'" frameborder="0" allowfullscreen></iframe></div></div>'},U=function(e){var t=e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/)
return null!=t?t[1]:""},N=function(e){var t=U(e)
return"https://img.youtube.com/vi/"+t+"/0.jpg"},W=function(e){var t=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(\S+)/g
if(t.test(e))var o='<div class="superlightbox_embed_wrapper"><div class="superlightbox_embed"><iframe width="420" height="345" src="//player.vimeo.com/video/$1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div></div>',e=e.replace(t,o)
return e},I=function(e){var t=D(e)
jQuery.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+t+".json",jsonp:"callback",dataType:"jsonp",success:function(e){if(jQuery(".superlightbox_video"+e[0].id).length){var t=e[0].thumbnail_large
jQuery(".superlightbox_video"+e[0].id).css({"background-image":"url('"+t+"')"})}}})},D=function(e){var t=e.match(/^.+vimeo.com\/(.*\/)?([^#\?]*)/)
return t?t[2]||t[1]:null},O=function(){return'<div class="superlightboxcontainer '+i+'" style="display:none;"><a href="javascript: void(0);" class="superlightbox_close"></a><div class="superlightbox_wrapper"><div class="superlightbox_slider"></div></div><div class="superlightbox_gallery"><a href="javascript: void(0);" class="superlightbox_gallery_button superlightbox_gallery_open"></a><a href="javascript: void(0);" class="superlightbox_gallery_nav superlightbox_gallery_prev" style="display: none;"></a><a href="javascript: void(0);" class="superlightbox_gallery_nav superlightbox_gallery_next" style="display: none;"></a><div class="superlightbox_gallery_wrapper" style="display: none;"></div></div><a href="javascript: void(0);" class="superlightbox_prev"></a><a href="javascript: void(0);" class="superlightbox_next"></a></div>'},M=function(e,t){t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
for(var o="",r=0;e>r;r++){var i=Math.floor(Math.random()*t.length)
o+=t.substring(i,i+1)}return o},H=function(e,t){var o={pinchImage:"",pinchZoom:function(e){},pinchZoomStart:function(){},pinchZoomEnd:function(){},swipe:function(e){},swipeLeft:function(e){},swipeRight:function(e){},swipeUp:function(e){},swipeDown:function(e){},swipeStart:function(e){},swipeEnd:function(e,t){},maxZoom:3},r=jQuery.extend({},o,t),i={},a=!1,n=!1
i.sX=0,i.sY=0,i.eX=0,i.eY=0
var s,l,p,d,g,m,_,h,v,b,f,x,y,w,k,S,j,Q,P,E,T,R,C,$,A,U,N,W,I=.1,D=20,O=40,M=40,H=50,z="",L=1,F=0,Y=0,X=c,B=u,q=jQuery(e)
q.on("touchstart",function(e){if(1==e.originalEvent.touches.length){a=!0,n=!1
var t=e.originalEvent.touches[0]
i.sX=t.screenX,i.sY=t.clientY,1==L?r.swipeStart(i):r.pinchZoomStart()}else if(2==e.originalEvent.touches.length){a=!1,n=!0
var o=jQuery(window).width()/2,g=jQuery(window).height()/2
0==c&&0==c&&(c=jQuery(r.pinchImage).width(),u=jQuery(r.pinchImage).height(),X=c,B=u,L=1,F=o-X,Y=g-B),s=e.originalEvent.touches[0].clientX,l=e.originalEvent.touches[0].clientY,p=e.originalEvent.touches[1].clientX,d=e.originalEvent.touches[1].clientY,j=(s+p)/2,Q=(l+d)/2,N=(j-F)/X,W=(Q-Y)/B,v=Math.sqrt(Math.pow(p-s,2)+Math.pow(d-l,2)),r.pinchZoomStart()}}),q.on("touchmove",function(e){if(e.preventDefault(),a){var t=e.originalEvent.touches[0]
if(i.eX=t.screenX,i.eY=t.clientY,L>1){var o={}
o.left=F+X+(i.eX-i.sX),o.top=Y+B+(i.eY-i.sY),r.pinchZoom(o)}else r.swipe(i)}else if(n){g=e.originalEvent.touches[0].clientX,m=e.originalEvent.touches[0].clientY,_=e.originalEvent.touches[1].clientX,h=e.originalEvent.touches[1].clientY,b=Math.sqrt(Math.pow(_-g,2)+Math.pow(h-m,2)),f=b/v,x=f*L,w=c*x,y=u*x,P=(g+_)/2,E=(m+h)/2,T=(X-w)*N,R=(B-y)*W,C=-j+P,$=-Q+E,A=T+C,U=R+$,k=parseInt(F+A),S=parseInt(Y+U)
var o={}
o.left=k+w,o.top=S+y,o.width=w,o.height=y,r.pinchZoom(o)}}),q.on("touchend",function(e){if(a){if(L>1)return F+=i.eX-i.sX,void(Y+=i.eY-i.sY)
var t=jQuery(window).width(),o=jQuery(window).height()
D=t*I,M=o*I,(i.eX-D>i.sX||i.eX+D<i.sX)&&i.eY<i.sY+H&&i.sY>i.eY-H&&(z=i.eX>i.sX?"l":"r"),(i.eY-M>i.sY||i.eY+M<i.sY)&&i.eX<i.sX+O&&i.sX>i.eX-O&&(z=i.eY>i.sY?"d":"u"),""!=z&&("l"==z?r.swipeLeft(i):"r"==z?r.swipeRight(i):"u"==z?r.swipeUp(i):"d"==z&&r.swipeDown(i)),r.swipeEnd(i,z),z=""}else if(n){var s=jQuery(window).width()/2,l=jQuery(window).height()/2
if(1>x){x=1
var p={}
p.left="50%",p.top="50%",p.width=c,p.height=u,r.pinchZoom(p),k=s-c,S=l-u,w=c,y=u}else if(x>r.maxZoom){x=r.maxZoom,w=c*x,y=u*x,T=(X-w)*N,R=(B-y)*W,C=-j+P,$=-Q+E,A=T+C,U=R+$,k=parseInt(F+A),S=parseInt(Y+U)
var p={}
p.left=k+w,p.top=S+y,p.width=w,p.height=y,r.pinchZoom(p)}F=k,Y=S,X=w,B=y,L=x,r.pinchZoomEnd()}a=!1,n=!1}),q.on("touchcancel",function(e){a=!1,n=!1})}
return i=M(10),this.each(function(){var e=jQuery(this),t=e.attr(g.mediaAttribute)
if(jQuery.inArray(t,n)<0){n.push(t)
var o=void 0!==e.attr(g.mediaCaption)?e.attr(g.mediaCaption):""
s.push(o)}e.click(function(e){e.preventDefault(),m(jQuery(this))})})}
